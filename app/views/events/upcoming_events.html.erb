<% provide(:title, "Home") %>

<%= render "events/header" %>

<ul class="nav nav-tabs mx-auto col-md-6 col-md-offset-3 d-flex justify-content-center">
	<li class="nav-item">
		<%= link_to "Upcoming Events", root_path, class: "nav-link active" %>
  </li>
	<li class="nav-item">
		<%= link_to "Past Events", past_events_path, class: "nav-link" %>
  </li>
</ul>

<% if user_signed_in? %>
	<div>
		<%= current_user.email %> <br> <br>
		<%= button_to "Log out", destroy_user_session_path, method: :delete %>
	</div>
	<br>
	<div>
	<% if notice %>
		<div>
			<%= notice %>
		</div>
	<% end %>
	<% if alert %>
		<div>
			<%= alert %>
		</div>
	<% end %>
	</div>
<% else %>
	<div>
		<%= link_to "Login here", new_user_session_path %><br>
		Don't have an account? Sign in <%= link_to "here", new_user_registration_path %>
		<br>
		<br>
	</div>
<% end %>

<div>
	<p>
		There is <%= @counting_upcoming %> events in here!
	</p>
</div>

<br>

	<div>
		<% unless @upcoming.empty? %>
			<h4>Upcoming Events</h4>
			<% @upcoming.each do |event| %>
				Author : <%= event.creator.email %><br>
				Event Name : <%= link_to event.event_name, event %><br>
				Date : <%= event.date %><br>
				Location : <%= event.location %><br>
				<% if event.attendeer == [] %>
					Participants : No participants
				<% else %>
					Participants : <%= event.attendeer.pluck(:email) %><br>
				<% end %>
			<% end %>
			<hr>
		<% else %>
			<h3>There is no upcoming events. Let's make some event!</h3>
		<% end %>
	</div>
<%= link_to "Add new event", new_event_path %>
